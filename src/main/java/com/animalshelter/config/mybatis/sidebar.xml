<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.animalshelter.sidebar.dao.SidebarDao">

	<select id="articleList" parameterType="map"   resultType="boardDto">
	select seq,subject,content,email,boardtype,joindate,hit
	from board
	where email='${email}'
	<if test="word != null and word != ''">
	and ${key} like '%' ||  #{word} || '%'
	</if>
	<!-- <if test="word != null and word != ''">
	and m.${key} = #{word}
	</if> -->
	</select>
	
	
	<select id="attention" parameterType="map"   resultType="parcelDto">
	
	select t.*
	from(
		select rownum rn, a.*
		from(
			select p.seq,p.age,p.kind,p.weight,p.location,b.subject,b.content
			from board b, pparcelboard p
			where b.seq = p.seq
			order by b.seq desc
				) a
		where rownum &lt;= #{end}
		) t
	where t.rn &gt; #{start}

<!-- 	select seq -->
<!-- 	from pparcelboard -->
	<!-- <if test="word != null and word != ''">
	and m.${key} = #{word}
	</if> -->
	</select>
	



	<select id="donation" parameterType="map"   resultType="donationDto">
	select t.*
	from(
		select rownum rn, a.*
		from(
			select b.seq,b.subject,b.content,d.centername,d.gatheringfee,d.cdonationfee,d.cdonationpurpose
			from board b,donationboard d
			where b.seq=d.seq 
			order by b.seq desc
			) a
		where rownum &lt;= #{end}
		) t
	where t.rn &gt; #{start}
	
<!-- 	select seq -->
<!-- 	from pparcelboard -->
	<!-- <if test="word != null and word != ''">
	and m.${key} = #{word}
	</if> -->
	</select>
	
	<select id="volunteer" parameterType="map"   resultType="volunteerDto">
	select t.*
	from(
		select rownum rn, a.*
		from(
			select b.seq,b.subject,b.content,v.tel,v.centername,v.volunteerkind,v.volunteerdate,v.centerlocation
			from board b,volunteerboard v
			where b.seq=v.seq 
			) a
		where rownum &lt;= #{end}
		) t
	where t.rn &gt; #{start}
	
	</select>
	
	<select id="parcel" parameterType="map"   resultType="parcelDto">
	select t.*
	from(
		select rownum rn, a.*
		from(
			select b.seq,b.content,p.age,p.kind,p.weight,p.location,b.subject
			from board b,pparcelboard p
			where b.seq=p.seq 
		) a
		where rownum &lt;= #{end}
		) t
	where t.rn &gt; #{start}
<!-- 	select seq -->
<!-- 	from pparcelboard -->
	<!-- <if test="word != null and word != ''">
	and m.${key} = #{word}
	</if> -->
	</select>

	
	<select id="myattention" parameterType="map"   resultType="parcelDto">
<!-- 	select p.age,p.kind,p.weight,p.location,b.subject -->
<!-- 	from board b,pparcelboard p -->
<!-- 	where b.seq=p.seq  -->
<!-- 	and b.email='${email}' -->
<!-- 	select seq -->
<!-- 	from pparcelboard -->
	<!-- <if test="word != null and word != ''">
	and m.${key} = #{word}
	</if> -->
	select t.*
	from(
		select rownum rn, a.*
		from(
			select p.seq,p.age,p.kind,p.weight,p.location,b.subject
			from board b, pparcelboard p
			where b.seq = p.seq
			and email='${email}'
			order by b.seq desc
				) a
		where rownum &lt;= #{end}
		) t
	where t.rn &gt; #{start}
	</select>
	
	<select id="mydonation" parameterType="map"   resultType="donationDto">
	select t.*
	from(
		select rownum rn, a.*
		from(
			select b.seq,b.subject,b.content,d.centername,d.gatheringfee,d.cdonationfee,d.cdonationpurpose
			from board b,donationboard d
			where b.seq=d.seq 
			and b.email='${email}'
			) a
		where rownum &lt;= #{end}
		) t
	where t.rn &gt; #{start}
<!-- 	select seq -->
<!-- 	from pparcelboard -->
	<!-- <if test="word != null and word != ''">
	and m.${key} = #{word}
	</if> -->
	</select>
	
	<select id="myvolunteer" parameterType="map"   resultType="volunteerDto">
	select t.*
	from(
		select rownum rn, a.*
		from(
			select b.seq,b.content,b.subject,v.tel,v.centername,v.volunteerkind,v.volunteerdate,v.centerlocation
			from board b,volunteerboard v
			where b.seq=v.seq 
			and b.email='${email}'
		) a
		where rownum &lt;= #{end}
		) t
	where t.rn &gt; #{start}
	</select>
	
	<select id="myparcel" parameterType="map"   resultType="parcelDto">\
	select t.*
	from(
		select rownum rn, a.*
		from(
			select b.seq,b.subject,b.content,p.age,p.kind,p.weight,p.location,b.subject
			from board b,pparcelboard p
			where b.seq=p.seq 
			and b.email='${email}'
	) a
		where rownum &lt;= #{end}
		) t
	where t.rn &gt; #{start}
	
<!-- 	select seq -->
<!-- 	from pparcelboard -->
	<!-- <if test="word != null and word != ''">
	and m.${key} = #{word}
	</if> -->
	</select>
</mapper>  
